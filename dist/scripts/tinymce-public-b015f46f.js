!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/public/wp-content/plugins/public/dist/",n(n.s=5)}([,,,,,function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";n.r(e);n(7)},function(t,e,n){(function(t){var e;(e=window.tinymce).ui.Factory.add("PublicLinkPreview",e.ui.Control.extend({url:"",type:"link",symbol:"",renderHtml:function(){return'<div id="'.concat(this._id,'" class="wp-link-preview public-link-preview">\n                        <span>\n                            Linked stock: \n                            <a\n                                href="').concat(this.url,'"\n                                target="_blank"\n                                tabindex="-1"\n                                title="').concat(this.url,'"\n                            >\n                                $').concat(this.symbol,"\n                            </a>\n                        </span>\n                    </div>")},setSymbol:function(t){if(t){var e=this.getEl().querySelector("a");this.symbol=t.toLowerCase(),this.url="https://public.com/stocks/".concat(this.symbol),e.innerText="$"+this.symbol.toUpperCase(),e.title=this.url,e.href=this.url}}})),e.ui.Factory.add("PublicLinkInput",e.ui.Control.extend({type:"link",renderHtml:function(){var t=e.translate("Type to search stock by name"),n=e.translate("Chart width:"),i='<div id="'.concat(this._id,'" class="wp-link-input public-link-input">');return i+='<input type="text" value="" placeholder="'.concat(t,'" />'),i+='<input type="text" style="display:none" value="" />',i+="<label>".concat(n," "),i+='<input type="text" value="" placeholder="Eg: 100% or 200px" name="public_chart_width" />',i+="</label>",i+="</div>"},setURL:function(t){this.getEl().firstChild.value=t},setType:function(t){this.type=t},getURL:function(){return e.trim(this.getEl().firstElementChild.value)},getType:function(){return this.type},getWidth:function(){var t=this.getEl().querySelector("input[name=public_chart_width]").value;return t&&-1===t.indexOf("%")&&-1===t.indexOf("px")&&(t+="%"),t},getLinkText:function(){var t=this.getEl().firstElementChild.nextElementSibling.value;return e.trim(t)?t.replace(/[\r\n\t ]+/g," "):""},reset:function(){var t=this.getEl().firstElementChild;t.value="",t.nextElementSibling.value=""},focusOnSearchInput:function(){return this.getEl().firstElementChild.focus()}})),e.PluginManager.add("public_link",(function(n){var i,o,c,l,a,r=t;function u(){n.$("public").each((function(t,e){var i=n.$(e);"placeholder"!==i.attr("data-stock")&&"placeholder"!==i.attr("data-chart")||n.dom.remove(e,!0)}))}function d(){o.show(),o.reposition(),l.classes.remove("chart"),l.classes.remove("link"),l.classes.add(l.type),l.active(!0),l.focusOnSearchInput()}return n.on("preinit",(function(){n.wp&&n.wp._createToolbar&&(i=n.wp._createToolbar(["public_link_preview","public_link_edit","public_link_remove"],!0),o=n.wp._createToolbar(["public_link_input","public_link_apply"],!0))})),n.on("keydown",(function(t){27===t.keyCode&&n.execCommand("public_link_cancel"),t.altKey||e.Env.mac&&(!t.metaKey||t.ctrlKey)||!e.Env.mac&&!t.ctrlKey||89!==t.keyCode&&90!==t.keyCode||(window.clearTimeout(a),a=window.setTimeout((function(){}),500))})),n.on("wptoolbar",(function(t){"public"!==t.element.localName&&n.execCommand("public_link_cancel");var e=n.dom.getParent(t.element,"public");e&&void 0!==e.dataset.stock&&function(t){"placeholder"!==t.dataset.stock&&(o.hide(),i.reposition(),c.active(!0),c.setSymbol(t.dataset.stock),setTimeout((function(){i.show()}),250))}(e)})),n.addButton("public_link_preview",{type:"PublicLinkPreview",onPostRender:function(){c=this}}),n.addButton("public_link_input",{type:"PublicLinkInput",onPostRender:function(){var t,e,n,i=this.getEl(),c=i.firstElementChild;l=this,r&&r.ui&&r.ui.autocomplete&&((t=r(c)).autocomplete({source:function(t,i){n!==t.term?(r.post(window.ajaxurl,{action:"public-link-ajax",stock:t.term,_ajax_linking_nonce:r("#_ajax_linking_nonce").val()},(function(t){e=t,i(t)}),"json"),n=t.term):i(e)},focus:function(e,n){t.attr("aria-activedescendant","mce-wp-autocomplete-"+n.item.symbol),e.preventDefault()},select:function(e,n){return t.val(n.item.symbol),r(i.firstElementChild.nextElementSibling).val(n.item.name),!1},open:function(){t.attr("aria-expanded","true"),o.blockHide=!0},close:function(){t.attr("aria-expanded","false"),o.blockHide=!1},minLength:2,position:{my:"left top+2"},messages:{noResults:void 0!==window.uiAutocompleteL10n?window.uiAutocompleteL10n.noResults:"",results:function(t){if(void 0!==window.uiAutocompleteL10n)return t>1?window.uiAutocompleteL10n.manyResults.replace("%d",t):window.uiAutocompleteL10n.oneResult}}}).autocomplete("instance")._renderItem=function(t,e){return r('<li role="option" id="mce-wp-autocomplete-'+e.symbol+'">').append("<span>"+e.name+'</span>&nbsp;<span class="wp-editor-float-right">'+e.symbol+"</span>").appendTo(t)},t.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":t.autocomplete("widget").attr("id")}).on("focus",(function(){var e=t.val();e&&!/^https?:/.test(e)&&t.autocomplete("search")})).autocomplete("widget").addClass("wplink-autocomplete"))}}),n.addButton("public_link_apply",{tooltip:"Apply",icon:"dashicon dashicons-editor-break",cmd:"public_link_apply",classes:"widget btn primary"}),n.addCommand("public_link_apply",(function(){if(!o.scrolling){var t=l.getURL(),e=(l.getType(),n.dom.select('public[data-stock="placeholder"]')[0]),i=n.dom.select('public[data-chart="placeholder"]')[0];if(e||i){if(e)e.dataset.stock=t;else if(i){i.dataset.chart=t;var c=l.getWidth(),a=c?"public-chart public-chart-custom-width":"public-chart public-chart-no-custom-width",r=n.dom.create("span",{class:a,style:c?"width: ".concat(c):""},'<iframe src="https://public.com/stocks/'.concat(t,'/embed" allowtransparency="true"></iframe>'));i.innerHTML=r.outerHTML}o.hide(),l.reset(),l.active(!1),n.nodeChanged()}}})),n.addButton("public_link_remove",{tooltip:"Remove link",icon:"public-link-unlink",cmd:"public_link_remove"}),n.addCommand("public_link_remove",(function(){var t=n.selection.getNode();t.outerHTML=t.innerText,i.hide(),c.active(!1),u()})),n.addButton("public_link",{tooltip:"Insert/Edit Linked Stock",cmd:"Public_Link",image:window.pblc.plugin_uri+"dist/icons/insert-link.svg",stateSelector:"public[data-stock]"}),n.addButton("public_link_edit",{tooltip:"Edit|button",cmd:"Public_Link",icon:"public-link-edit"}),n.addCommand("Public_Link",(function(){i.hide(),c.active(!1);var t=function(){var t=!1,e=n.selection.getNode();return e&&(t="public"===e.localName.toLowerCase()?e:e.closest("public")),t}(),e=n.selection.getContent({format:"html"});if(0===e.length&&!t)return o.hide(),void i.hide();t||(u(),t=n.dom.create("public",{"data-stock":"placeholder","data-mce-selected":"inline-boundary"},e),n.execCommand("mceReplaceContent",!1,t.outerHTML),t=n.dom.select('public[data-stock="placeholder"]')[0],n.selection.select(t),n.nodeChanged()),l.setType("link"),d()})),n.addCommand("public_link_cancel",(function(){l.reset(),o.hide(),l.active(!1),i.hide(),c.active(!1),n.focus()})),n.addButton("public_chart",{tooltip:"Insert/Edit Stock Chart",cmd:"Public_Chart",image:window.pblc.plugin_uri+"dist/icons/insert-chart.svg",stateSelector:"public[data-chart]"}),n.addButton("public_chart_edit",{tooltip:"Edit|button",icon:"dashicon dashicons-edit",cmd:"Public_Chart",text:"Edit Chart"}),n.addCommand("Public_Chart",(function(){u(),i.hide(),c.active(!1);var t=n.dom.create("public",{"data-chart":"placeholder"},"â€‰");n.execCommand("mceInsertContent",!1,t.outerHTML),t=n.dom.select('public[data-chart="placeholder"]')[0],n.selection.select(t),n.nodeChanged(),l.setType("chart"),d()})),{close:function(){o.tempHide=!1,n.execCommand("public_link_cancel")}}}))}).call(this,n(8))},function(t,e){t.exports=jQuery}]);